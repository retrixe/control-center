name: retrixe-control-panel
version: '1.0.0-dev.git'
license: GPL-3.0+
title: Control Panel
summary: A Linux app for settings usually not in your desktop's Settings app.
description: |
  A Linux app for settings usually not in your desktop's Settings app.
  Currently only supports changing Lenovo laptops' Conservation Mode
  and reclocking GPUs using the nouveau driver (experimental).

base: core18
grade: devel
confinement: devmode
compression: lzo

# https://snapcraft.io/docs/interface-management
# https://snapcraft.io/docs/desktop-menu-icon-support
parts:
  control-panel:
    plugin: go
    source: .
    source-type: git
    build-packages:
      - gcc
      - libgl1-mesa-dev
      - xorg-dev

apps:
  retrixe-control-panel:
    command: control-panel
    extensions: [gnome-3-28]
    slots:
      - dbus-daemon
  retrixe-control-panel-daemon:
    command: control-panel --daemon
    daemon: simple
    slots:
      - sysfs-access
      - dbus-daemon

slots:
  sysfs-access:
    interface: system-files
    read: [/sys]
    write: [/sys]
  dbus-daemon:
    interface: dbus
    bus: system
    name: com.retrixe.ControlPanel
